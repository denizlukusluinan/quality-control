--- 
title: "İstatistiksel Kalite Kontrol"
author: "Prof. Dr. Deniz İnan"
date: "`r Sys.Date()`"
output:
  html_document:
    df_print: paged
  pdf_document: default
documentclass: book
bibliography:
- book.bib
- packages.bib
biblio-style: apalike
link-citations: yes
description: Statistical quality control lecture notes
site: bookdown::bookdown_site
---

# Ön Bilgi

Placeholder


## Hakkımda

<!--chapter:end:index.Rmd-->

---
output:
  pdf_document: default
  html_document: default
---
# Motivasyon

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/dprize.png" style="float: right;" width="250" height="250" title="Deming Prize" /> 

Kaliteyi kontrol etmek ve iyileştirmek rekabet ortamında kazananı belirleyen faktör haline gelmiştir. Bu bakımdan doğru yürütülen bir kalite kontrol süreci başarının anahtarı olacaktır. Sürecin başarılı yürütülmesi ise ancak alanında uzman kişilerin önderliğinde mümkündür. 

İstatistikçiler için olası bir çalışma alanı olan _İstatistiksel Kalite Kontrol_, gelecekte sizlerden biri veya birilerinin de yöneleceği alan olabilir. Bu bakımdan ders kapsamındaki bilgileri özümsemek, uygulamaları kavramak önem arz etmektedir. 

<br>


Dr. W. Edwards Deming tarafından yazılmış, incelenmesi gereken makaleler;

[On the statistician's contribution to quality](https://deming.org/wp-content/uploads/2020/06/On-The-Statisticians-Contribution-to-Quality-1987.pdf)

[Some responsibilities of the statistician](https://deming.org/wp-content/uploads/2020/06/Some-Responsibilities-of-a-Statistician-1964.pdf)

<!--chapter:end:01-Motivasyon.Rmd-->


# Ders Planı

Placeholder



<!--chapter:end:02-Genel-Bakış.Rmd-->


# Kalite Yönetimi Temel Kavramları

Placeholder


## Kalite Kavramı
## Kalite Boyutları
## Kalite Mühendislik Terminolojisi
## Toplam Kalite Yönetiminin Tarihsel Gelişimi
## Kalite Kontrol ve İyileştirme için İstatistiksel Yöntemler
## Kalite İyileştirmede Yönetim Cephesi
## Kalite Yönetimi Liderleri
### Walter Shewhart
### W. Edwards Deming
### Joseph M. Juran
### Armand V. Feigenbaum
### Philip Crosby
### Kaoru Ishikawa
### Genichi Taguchi
## Toplam Kalite Yönetimi
## Kalite Sistemleri ve Standartları
## ISO 9000 Kalite Standartları
## Malcolm Baldrige Ulusal Kalite Ödülü 
## Altı Sigma
### Neden 6$\sigma$        
### Sigma Kalite Seviyesi
### Altı Sigma Proje Yönetimi
## Kalite Maliyetleri

<!--chapter:end:03-Kalite-Yönetimi-Temel-Kavramları.Rmd-->


# DMAIC Süreci

Placeholder



<!--chapter:end:04-DMAIC-Süreci.Rmd-->

---
output:
  html_document: default
  pdf_document: default
  word_document: default
---
# İstatistiksel Kavramlar

İstatistik verinin toplanmasını, düzenlenmesini, analiz edilmesini ve yorumlanmasını sağlayan bir disiplindir. İstatistik betimsel (tanımlayıcı (descriptive)) ve çıkarımsal (tümevarımsal (inferential)) amaçlı istatistik olmak üzere ikiye ayrılır. 

**Betimsel istatistik:** Verilerin tablolar, grafikler veya özet istatistikler aracılığıyla betimlenmesi ve özetlenmesi ile ilgilidir. Bu sayede büyük veri kümeleri tek bir tablo, grafik veya özet istatistik ile temsil edilmekte ve herkes tarafından kolay anlaşılabilir bir biçimde sunulmaktadır.

**Çıkarımsal istatistik:** Kitleden rasgele seçilen örneklemden toplanan verileri kullanarak kitlenin parametrelerini tahmin etmeyi ve parametrelerle ilgili savların doğruluğunun araştırılmasını amaçlar. Çıkarımsal istatistikte örnekten elde edilen bilgilere dayanarak kitle hakkında kestirimlerde bulunmak, sonuçlar çıkarmak ve kararlar vermek istatistiğin önemli bir bölümünü oluşturur.

## Verilerin Toplanması ve Sunulması

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/alien.jpg" style="float: right;" width="400" height="270" title="Remind!" /> 

Veri; analiz, karar ve faaliyet için temeldir bu nedenle tüm veriler özellikle işlem ve üretim noktalarında kayıt edilmelidir. Sistematik ve doğru kayıt bu bakımdan oldukça önemlidir. Verinin yapısı prosesten prosese farklılık gösterebilir. Maliyet ve emek kaybının önlenmesi için yalnızca ihtiyaç duyulan veriler kayıt altına alınmalıdır. 

Verilerin istenilen hassasiyette ve doğru elde edilebilmesi için ölçü aletlerinin uygunluğu ve güvenilirliği sağlanmalıdır, ancak bu şekilde tekrarlanabilirlik mümkün olacaktır.

Kalite hakkında bilgi _sayarak_ veya _ölçerek_ elde edilebilir. Bu bakımdan veri tipleri niceliksel (variables) ve niteliksel (attributes) olarak ikiye ayrılmaktadır. 

**Niteliksel veri (attributes):** Sayarak elde edilen veri tipi belirli aralıklarla ortaya çıkmaktadır. Ör: 10 adetlik bir örnek gruptaki hatalar 0, 1, 2 gibi olabilir. Belirli uzunluktaki bir kumaştaki hataların sayısı, bir sayfadaki yazım hatalarının sayısı niteliksel veri tipine örnek olarak verilebilir.

**Niceliksel veri (variables):** Ölçerek elde edilen veri tipleri sürekli yapıdadırlar. Örn: sıcaklık, ağırlık, hacim, zaman vb.

Veri toplanırken bazı noktalara dikkat edilmesi gerekir.

- Amaca uygun hassasiyette veri toplanması gerekir.
- Verinin hassasiyeti ölçü aleti hassasiyetini aşamaz. Ör: 0.0001g hassasiyetle yapılması gereken tartım için 0.001g hassasiyete sahip terazi kullanılamaz.
- Gözlem sayısı, örnekleme yöntemi ve analiz için kullanılan yöntem araştırılan konuya uygun olarak belirlenmelidir.
- Veri toplanırken gerekli tüm koşullar saptanmalı ve kaydedilmelidir. (İlgili vardiya, üretimi yapan kişi, kullanılan cihaz, hammadde, çevre koşulları vb.)



Veri toplama işlemi otomatik veya manuel olarak yapılabilir. Çalışılan duruma bağlı olarak her iki yöntemin de avantajlı olduğu durumlar mevcuttur.

**Manuel sistem;**

- Veri toplayan kişi prosese daha yakındır ve daha iyi anlamaya çalışır.
- Veri toplayan kişi proses üzerinde tecrübe sahibi oldukça neden-sonuç ilişkisi kuracak ve yorumlayabilecektir.
- Veri toplanması daha dinamik hale gelecek, gerekli ve gereksiz parametreler açığa çıkacaktır.
- Geçici faaliyetler için manuel sistemlerin kullanımı hem pratik hem de ucuzdur.

**Otomatik sistem;**

- Değişimin çok hızlı olduğu durumlarda kullanışlıdır.
- Çok sayıda veri aynı anda toplanabilir.
- Sağlık ve emniyet açısından manuel veri toplamanın riskli olduğu durumlarda kullanılabilir.
- Veri toplama ve analiz aşamasının hızlı olması gerektiğinde kullanışlıdır.
- Fazla miktarda veri toplanması bakımından avantajlıdır.

## Değişkenliğin Tanımlanması

### Dal-Yaprak Grafiği

Bir proses tarafından üretilen iki ürün birimi aynı değildir. Bazı değişiklikler kaçınılmaz olarak ortaya çıkmaktadır. Örnek olarak, bir içecek şişesinin net içeriği, şişeden şişeye biraz değişir ve bir güç kaynağının çıkış voltajı, bir üniteden diğerine tam olarak aynı değildir. İstatistik, verilerdeki bu değişkenlikleri hesaba katarak analiz etme ve sonuç çıkarmada faydalandığımız bilimdir.

Verilerin sunulması için kullanılan başarılı görsellerden biri de dal-yaprak (steam and leaf) grafiğidir. 

Çalışan Sağlık Sigortası Taleplerinin Ödenmesi İçin Gün Olarak Döngü Süresi 

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/claim.png" style="float: center;" width="500" height="250" title="Claim-Days" /> 

```{r include=FALSE,cache=TRUE}
claim<-1:40
days<-c(48,41,35,36,37,26,36,46,35,47,35,34,36,42,43,36,56,32,46,30,37,43,17,26,28,27,45,33,22,27,16,22,33,30,24,23,22,30,31,17)
data<-cbind(claim,days)
data
```

```{r}
stem(days)  #dal-yaprak grafiği
```

Dal-yaprak grafiği verinin yayılım ve merkezi eğilimi hakkında fikir sahibi olmamızı sağlamaktadır. Bu bakımdan oldukça faydalı olmakla birlikte gözlemlerin zaman sırasını hesaba katmaz. Zaman, genellikle kalite iyileştirme problemlerindeki değişkenliğin yorumlanmasına katkıda bulunan önemli bir faktördür. Zamanı dikkate alan grafikler üretmek ve yorumlamak da mümkündür.


```{r echo=FALSE, message=FALSE, warning=FALSE,cache=TRUE}
library(plotly)
library(htmltools)

p<-plot_ly(as.data.frame(data), x = ~claim, y = ~days)
htmltools::tagList(p)
```

### Frekans Dağılımı

Kitle (popülasyon) çok sayıda birimden oluşuyorsa, bu birimleri sınıflandırmak kitlenin çeşitli özelliklerinin belirlenmesini kolaylaştıracaktır. Sınıflandırmanın en doğru yolu frekans tablosudur. Bu yapıda gözlenen veri sınıflara ayrılır, sonuçlanan tablo her bir sınıftaki gözlem sayısını vermektedir.

SPC açısından prosesteki değişkenleri açıkça görebilmek ve prosesin geçerliliği hakkında bir yargıya varabilmek için örneklerden elde edilen verilerin büyüklüklerine göre gruplandırılması gerekmektedir.

Frekans tablosu oluşturulurken dikkat edilmesi gereken noktalar aşağıda yer almaktadır.

- Sınıflar ayrık olmalıdır.

|**Yanlış** |   |**Doğru**  |
|:---------:|---|:---------:|
|4.00 - 4.50|   |4.00 - 4.49|    
|4.50 - 5.00|   |4.50 - 4.99|          

- Sınıflar veri kümesinde yer alan her değeri içine almalıdır.
- Sınıf limitleri ve sınıf sayısı hiç bir sınıf boş kalmayacak şekilde seçilmelidir.

<br>

**Frekans tablosu hazırlanması;**

Konu ile ilgili veriler mümkün olduğunca duyarlı , aynı ölçü birimi ile ve duyarlılığı aynı rakamlarla tespit edilir.

En büyük ve en küçük değerler arası fark, yani **değişim genişliği (range)** bulunur. Değişim genişliği belirlenen **sınıf sayısına** bölünerek **sınıf aralığı** tespit edilir. Burada önemli nokta sınıf sayısının kaç olduğuna karar vermektir. Bu karar verinin miktarına ve cinsine bağlı olarak uzman tarafından verilmekle birlikte genellikle 5-20 arasında seçilmektedir. Sınıf sayısının belirlenmesinde sıklıkla kullanılan bir yöntem de **Sturgess Kuralı**'dır. 

<br>

$K=1+3.3log_{10}N$

burada K sınıf sayısı, ve N toplam veri adedidir.

```{r}
1+3.3*(log(400,base=10))  #sturgess
```
<br>


**Örnek:** Bir ipek ipliğine ait mukavemet değerleri için frekans tablosu oluşturunuz.

```{r}
muk<-c(83,63,81,76,54,87,84,86,84,60,71,90,92,78,92,84,53,68,80,83,84,71,65,81,94,73,95,82,81,71,76,92,69,61,102,84,67,68,108,88,82,67,78,89,80,97,103,86,64,97,99,89,76,68,65,94,75,95,103,74,103,94,103,83,88,64,67,81,91,97,84,70,105,99,76,72,96,63,84,82,78,89,80,92,106,73,71,70,94,76,71,75,91,81,70,78,56,73,68,82,88,78,81,71,73,81,94,90,61,71,64,54,93,86,87,81,71,65,90,74)

N=length(muk); N    #gozlem sayisi
```
<br>

**En büyük gözlem**
```{r}
enb<-max(muk); enb
```
<br>

**En küçük gözlem**
```{r}
enk<-min(muk); enk
```
<br>

**Değişim genişliği (range)**
```{r}
range=enb-enk  #degisim genisligi
range
```
<br>

**Sınıf sayısı**
```{r}
K=1+3.3*(log(N,base=10));K   #sturgess
round(K)  
```
<br>

**Sınıf aralığı**
```{r}
ara<-range/round(K); ara
```
<br>

**Ödev:** Aşağıda yer alan mukavemet verisi için frekans tablosunu elde eden kodu yazınız.

```{r}
factorx <- factor(cut(muk, breaks=nclass.Sturges(muk)))
#Tabulate and turn into data.frame
xout <- as.data.frame(table(factorx))
#Add cumFreq and proportions
xout <- transform(xout, cumFreq = cumsum(Freq), relative = prop.table(Freq));xout
```

### Histogram

Histogram verinin yayılımını göstermektedir ve SPC'ün temeli verideki değişkenliği tanımlamaktır. Histogramın kullanım amaçları şu şekilde sıralanabilir;

- Problemleri çözmek
- Proses yeterliliğini analiz etmek
- Spesifikasyonlar ve gerçekleşen veriyi karşılaştırmak
- Popülasyonun şekli hakkında fikir edinmek
- Veri farklılıkları ve boşlukları ortaya koymak


Mukavemet örneği histogramı;

```{r warning=FALSE,cache=TRUE}
library(plotly)
fig<-plot_ly(x = ~muk,type = "histogram") 
fig
```

```{r echo=FALSE}
xout
```


### Merkezi Eğilim Ölçüleri

Frekans dağılımının simetrik, sağa veya sola çarpık olma durumu merkezi eğilim ölçüleri yardımıyla belirlenir. Merkezi eğilim ölçüsü olarak üç ölçü sıklıkla kullanılır, bunlar;

- Ortalama (mean)
- Medyan (ortanca (median))
- Mod  (tepedeğer (mode))

<br>

**Ortalama:** $x_{1},x_{2},...,x_{n}$ örneklemde yer alan gözlemler olmak üzere;

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/mean.png" style="float: center;" width="700" height="110" title="Mean" />

eşitliği, en önemli merkezi eğilim ölçüsü olan ortalamayı elde etmemizi sağlar. Gözlem değerlerinde meydana gelen çok küçük değişmeler aritmetik ortalamayı etkiler, bu nedenle aykırı değer durumunda kullanımına dikkat edilmelidir. Bir veride yalnızca bir aritmetik ortalama vardır. Nicel verilere uygulanabilir.

<br>

**Medyan:** Gözlem değerleri en küçükten en büyüğe sıralandığında tam ortaya düşen gözlem medyan (ortanca)'dır.Gruplanmamış verilerde gözlem sayısı tek ise medyan tam ortadaki gözlemdir ancak gözlem sayısı çift ise tam ortaya denk gelen iki gözlemin aritmetik ortalamasıdır.

Medyan aykırı değerlerden etkilenmez, bu bakımdan aritmetik ortalamadan üstündür. Ancak aritmetik ortalamanın daha hassas olduğu unutulmamalıdır. Bir veride yalnızca bir medyan vardır. Nicel verilere uygulanabilir.

<br>

**Mod:** Veriler arasında en çok tekrar eden gözleme mod (tepedeğer) denir. Hassaslığı en az olan ölçüdür ancak hesaplanması kolaydır. Hem nitel hem de nicel veriler için kullanılabilir. 

<br>

Bir frekans dağılımı için ortalama, medyan ve mod değerleri birbirine eşit ise dağılım **simetriktir (symmetrical)**. Mod $<$ Medyan $<$ Ortalama şeklinde sıralama söz konusu ise dağılım **sağa çarpık (positive skewness)**, Ortalama $<$ Medyan $<$ Mod şeklinde ise dağılım **sola çarpıktır (negative skewness)**.


<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/sym.png" style="float: center;" width="900" height="300" title="Skewness" /> 

```{r}
# Frequency

d<-c(10,10,11,12,12,12,12,12,12,13,13,14,15,20,20,23)
table(d)
```



```{r}
t<-rnorm(1000)^2

mean<-mean(t)     #mean

median<-median(t)  #median

freq <- table(t);   #frequency

mode<-as.numeric(names(freq)[which.max(freq)])   #mode

sort(c(mean=mean,median=median,mode=mode))


```

```{r,cache=TRUE}
fig<-plot_ly(x = t, type="histogram")
htmltools::tagList(fig)
```


### Yayılım Ölçüleri

Merkezi eğilim ölçülerinin yanında, verinin nasıl yayıldığını ve ortalama değerin her bir tarafında nasıl dağıldığını ortaya koyan yayılım ölçüleri verinin tanımlanması ve anlamlandırılması açısından önem taşımaktadır. Yayılımın analizi için üç ölçü yaygın şekilde kullanılır;

- Genişlik
- Standart Sapma
- Varyans

**Genişlik (range):** Genişlik yayılımı hesaplamak için en kolay yoldur. Veri kümesindeki en büyük ve en küçük değer arasındaki farka karşılık gelir. 

**Standart Sapma:** Standart sapma, yayılım için kullanılan bir diğer ölçüdür. Verinin sınıflandırılmış veya sınıflandırılmamış olmasına bağlı olarak farklı şekillerde hesaplanmaktadır.

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/sd.png" style="float: center;" width="700" height="110" title="Sd" />

**Varyans:** Varyans en hassas yayılım ölçüsüdür. Gözlemler arasındaki değişimi ölçer. Varyansın pozitif karekökü ise standart sapmayı ifade eder. Verideki birimlerin değerleri aritmetik ortalama etrafında yoğunlaşıyorsa varyans küçüktür ve bu durum verinin homojen olduğunu dolayısı ile kaliteyi gösterir. Gözlemlerin aldıkları değerler aynı ise varyans sıfırdır. Aşağıdaki eşitlikte örneklem varyansı formülasyonu yer almaktadır. 


<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/var.png" style="float: center;" width="700" height="110" title="Variance" />

<br>

Araştırmada iki kitle üzerinde çalışılıyorsa bu iki kitlenin aritmetik ortalamaları eşit olduğu durumda varyansı küçük olan kitle daha homojen olarak tanımlanırken aritmetik ortalamaları farklı iki kitleyi varyans açısından yorumlamak doğru olmayacaktır. Bu durumda **değişim katsayısından** faydalanılır.

$C=\sigma/\mu$ olarak tanımlanan değişim katsayısı ölçü birimlerinden kaynaklanan farklılıkları da gidermektedir.

Çarpıklık-basıklık katsayıları ve değişken katsayısı da yayılım ölçüsü olarak kullanılabilmektedir.



### Kutu Grafiği (Box Plot)

Dal-yaprak grafiği ve histogram, bir veri seti hakkında görsel bir izlenim sağlarken, örnek ortalaması ve standart sapma, verilerin belirli özellikleri hakkında nicel bilgi sağlar. Kutu grafiği, verilerin merkezi eğilim, yayılma ve aykırı gözlemlerin gözlenebilmesi gibi verilerin birkaç önemli özelliğini eşzamanlı olarak görüntüleyen bir grafik türüdür.

Aykırı değerlerin varlığı tanımlayıcı istatistiklerin yanlış hesaplanmasına neden olur bu nedenle tespit edilmeleri oldukça önemlidir ve kutu grafiği bu bakımdan oldukça faydalıdır.

Kutu grafiğinin oluşturulabilmesi için gerekli 5 önemli değer bulunmaktadır. En küçük değer, birinci çeyrek değer ($Q_{1}$), medyan, üçüncü çeyrek değer ($Q_{3}$) ve en büyük değer. Kutu grafikleri iki farklı dağılımın karşılaştırılmasında kolaylık sağlar.

> En küçükten en büyüğe sıralanmış verileri 4 eşit parçaya bölen değerlere çeyrek değerler ya da kartiller denir. 

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/boxplot.jpg" style="float: center;" width="500" height="250" title="Box Plot" />

$Q_{1}=(n+1)/4$

$Q_{3}=3(n+1)/4$

Alt limit$=Q_{1}-1.5(Q_{3}-Q_{1})$

Üst limit$=Q_{3}+1.5(Q_{3}-Q_{1})$

Veride alt limitin altında veya üst limitin üzerinde bir gözlem yer alıyorsa bu gözlem **aykırı değer** olarak nitelendirilir.

```{r,cache=TRUE}
boxp1 <- plot_ly(y = muk, type = "box",name="Mukavemet"); boxp1
```

```{r,cache=TRUE}
boxp2 <- plot_ly(y = t, type = "box",name="Norm^2"); boxp2
```

<br>

Çarpıklığı yatay eksende gözlemek daha iyi kavramamızı sağlayacaktır. Verinin sağa çarpık olduğu ve fazla miktarda aykırı değer içerdiği kutu grafikten gözlenebilmektedir.

```{r,cache=TRUE}
boxp2.horizontal <- plot_ly(x = t, type = "box",name="Norm^2 Horizontal"); boxp2.horizontal
```


### Olasılık Dağılımları

Olasılık dağılımları ve özellikle normal dağılım istatistiksel kalite kontrol ile ilgili teoremlerde önemli yer tutmaktadır. Olasılık dağılımları kesikli ve sürekli olmak üzere iki yapıda incelenmektedir. Değişkenin ölçülen değeri sürekli bir ölçek üzerinde ifade ediliyor ise bu değişkenin olasılık dağılımına sürekli dağılım, eğer ölçülen değişken 0, 1, 2... gibi tamsayılı değerler alıyorsa bu değişkenin olasılık dağılımı kesikli dağılım olarak adlandırılır.

>Değeri deneyden deneye değişen sonuçlar ile belirtilen değişkene rastgele değişken denir.



<br>

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/dist.png" style="float: center;" width="800" height="300" title="Box Plot" />


Kesikli ve sürekli olasılık dağılımları sırasıyla $(a)$ ve $(b)$ ile grafiksel olarak gösterilmiştir. $X$ rasgele değişkeninin bir $x_{i}$ değerini alma olasılığı;

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/disc.png" style="float: center;" width="700" height="60" title="Discrete" />

Sürekli dağılımda olasılık eğrinin altında kalan alana karşılık gelmektedir, $X$ rasgele değişkeninin $a$ ve $b$ arasında olma olasılığı; 

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/cont.png" style="float: center;" width="700" height="60" title="Continuous" />

Bir olasılık dağılımının ortalaması, dağılımın merkezi eğiliminin bir ölçüsüdür. Ortalama, kesikli ve sürekli dağılımlar için aşağıdaki gibi tanımlanır.

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/distmu.png" style="float: center;" width="700" height="140" title="Mean" />

Bir dağılımdaki yayılma veya değişkenlik, varyans ile ifade edilir. Varyans, kesikli ve sürekli dağılımlar için aşağıdaki gibi tanımlanır.

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/distv.png" style="float: center;" width="700" height="140" title="Variance" />

## Önemli Kesikli Olasılık Dağılımları

### Hipergeometrik Dağılım

Hipergeometrik dağılım istatistiksel kalite kontrolde, belirli sayıda kusurlu ve belirli sayıda kusursuz ürün içeren bir kümeden seçilen (iadesiz) belirli sayıdaki ürünün  kusurlu ve kusursuz ürün sayılarına ilişkin olasılıkları vermektedir.

Bazen sonlu elemanlı bir kitleden idesiz çekiliş yapılmak istenebilir. Bir deneyin sadece iki sonucu varsa, çekilen örnek sayısı n sabit ve denemeler bağımlı ise böyle durumlarda hipergeometrik dağılım kullanılır.

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/hipgeo.png" style="float: center;" width="600" height="370" title="Hipergeometrik" />

**N:** Toplam eleman sayısı

**D:** N'in bir bölümü ($D\leq N$)

**n:** örnek hacmi

**x:** istenen durum sayısı

<br>

**Kombinasyon hatırlatma:** 

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/comb.png" style="float: center;" width="150" height="80" title="Kombinasyon" />


<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/phyp.png" style="float: center;" width="800" height="250" title="phyp.r" />

<br>

**Örnek:** İçinde 10 sağlam ve 4 arızalı ürün bulunan bir kümeden 5 ürün alınmıştır. Bu ürünlerin

  **a)** 3 adetinin sağlam olma olasılığı nedir?

```{r}
a<-dhyper(x = 3, m = 10, n = 4, k = 5); a
```
  <br>
  
  **b)** En fazla 2'sinin sağlam olma olasılığı nedir?
  
```{r}
# P(X<=2)=P(X=0)+P(X=1)+P(X=2)

tot=numeric()  # bos vektor
for(i in 0:2){
tot[i+1]=dhyper(x = i, m = 10, n = 4, k = 5)}
b<-sum(tot); b
```
Yada
```{r}
b<-phyper(2,10,4,5)

```

   <br>
   
   **c)** En az üçünün sağlam olma olasılığı nedir?

```{r}
# P(X>=3)=1-(P(X=0)+P(X=1)+P(X=2))

c<-1-b
c

```

<br>

**Örnek:** Bir tekstil fabrikasında üretilmiş 1000 tişörtün 200'ünün kusurlu olduğu biliniyor. Perakende satış yapan bir mağaza sahibi 25 tişörtü rasgele seçerek alırken kusurlu tişört sayısı 4'den çok çıkarsa malı iade edeceğini söylüyor. Malı iade etme olasılığı nedir?

```{r}
# P(X>4)=1-P(X<=4)

z=numeric()  # bos vektor
for(i in 0:4){
z[i+1]=dhyper(x = i, m = 200, n = 800, k = 25)}
sum<-sum(z);

iade=1-sum; iade

```
yada

```{r}
1-phyper(4,200,800,25)

```



### Binom Dağılımı

Sadece iki sonuç veren bir Bernoulli deneyinin n kez birbirinden bağımsız ve aynı koşullar altında tekrar ettiği biliniyorsa ve sıra gözetilmeden başarı türünden oluşan sonuçlarla ilgileniliyorsa bu dağılıma binom dağılımı denir. Binom dağılımı n (örnek büyüklüğü) ve p (hatalı/hatasız olasılığı) olmak üzere iki parametreye sahiptir.

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/binom.png" style="float: center;" width="600" height="280" title="Binom" />

<br>

**Örnek:** Bir fabrikada üretim yapan vardiyalardan birinin ürettiği ürünlerin %10 olasılıkla kusurlu olduğu tespit edilmiştir. Bu ürünlerden rasgele 5 adet alındığında,

  **a)** 1 adedinin kusurlu olma olasılığı nedir?
  
```{r}
dbinom(1, size=5, prob=0.10)
```
  
  <br>
  
  
  **b)** En fazla 1 adedinin kusurlu olma olasılığı nedir?
  
```{r}
# P(X<=1)=P(X=0)+P(X=1)

kusur=numeric()  # bos vektor
for(k in 0:1){
kusur[k+1]=dbinom(x=k, size=5, prob=0.10)}
sum(kusur)
```
  yada
  
```{r}
pbinom(1,5,0.10)
```
  
  <br>
  
  **c)** En az 2 adedinin kusurlu olma olasılığı nedir?
  
```{r}
# P(X>=2)=1-P(X<=1)

1-sum(kusur)
```
 yada
 
```{r}
1-pbinom(1,5,0.10)
```
 
  
 <br> 
  
**Örnek:** Bir firma %5 kusurlu ürün içeren büyük bir parti maldan rasgele 120 adet seçiyor. Y bu 120 üründeki kusurluların sayısı olsun. Firma kusurlu parçaları tamir için geri gönderecektir. Tamirin maliyeti;

$M=8Y^{2}+0.5Y-10$

fonksiyonu ile hesaplanmaktadır. Tamirin beklenen maliyeti nedir?

```{r}
# E(M)=8E(Y^2)+0.5E(Y)-E(10)

# E(Y)=np

#Var(Y)= npq= E(Y^2)-E(Y)^2

ey=120*0.05
eykare=120*0.05*0.95+(ey^2)
em=8*eykare+0.5*ey-10; em
```



### Poisson Dağılımı

Poisson dağılımı belirli aralıkta gerçekleşme olasılığı çok küçük olan durumlarda kullanılır. Dağılımın tek parametresi $\lambda$ olup gerçekleşen ortalama olay sayısında eşittir. Poisson dağılımı istatistiksel kalite kontrolde ürünün bir biriminde oluşan uygunsuzlukların ya da kusur sayısının belirlenmesinde kullanılan bir dağılımdır. Zaman birimi başına gözlemleri içeren birçok durumda bu dağılım uygulanabilir.

$\lambda=np$

Poisson dağılımı, kabul örneklemesi ve ölçülemeyen özellikler için kontrol diyagramlarında bir temel oluşturmaktadır.

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/poisson.png" style="float: center;" width="600" height="300" title="Poisson" />

**Örnek:** Bir fabrikada üretilen ürünler 0.004 olasılıkla kusurludur. Üretilen bu ürünlerden rassal örnekleme ile 1000 adet alınmıştır.

  **a)** 3 adet ürünün kusurlu olma olasılığı nedir?
  
```{r}
# lambda=n*p

dpois(x = 3, lambda = 1000*0.004)
```
  
  
   <br> 
   
  **b)** 3 adetten daha az ürünün kusurlu olma olasılığı nedir?
  
```{r}
# P(X<3)=P(X=0)+P(X=1)+P(X=2)

kusurlu=numeric()  # bos vektor
for(t in 0:2){
kusurlu[t+1]=dpois(x = t, lambda = 1000*0.004)}
sum(kusurlu)
```
  yada
```{r}
ppois(2, 1000*0.004)

```
  
   <br> 
   
  **c)** En az 2 ürünün kusurlu olması olasılıklarını hesaplayınız.

```{r}
# P(X>=2)=1-P(X<2)

kusurlu
1-sum(kusurlu[1:2])   # 2 dahil degil

```
yada

```{r}
1-ppois(1, 1000*0.004)
```

   <br> 
   
**Örnek:** Bir büyük alışveriş merkezinde yürüyen merdivenlerin yılda ortalama 3 gün arızalandığı saptanmıştır.

  **a)** Herhangi bir ay içinde merdivenlerin hiç arızalanmama olasılığı nedir?
  
```{r}
lambda=3/365*30; lambda  #aylik

# P(X=0)
dpois(x = 0, lambda =lambda )
```
 <br>  
  
  
  **b)** Herhangi bir ay içinde merdivenlerin 2'den az arızalanma olasılığı nedir?
  
```{r}
# P(X<2)=P(X=0)+P(X=1)
d1=dpois(x = 0, lambda =lambda)
d2=dpois(x = 1, lambda =lambda)
sum(d1,d2)
```
  <br>  
  
  **c)** Bir sonraki yıl merdivenlerin hiç arızalanmama olasılığı nedir?
```{r}
lambda2=3  # yil
dpois(x = 0, lambda =lambda2)
```

  <br> 
  
**Ödev:** Bir fabrikanın deposundaki stoktan 365 gün içinde 36 ton mal çekilmiştir. Bu dönem içinde rasgele saptanan bir 15 günlük dilimde en az 3 ton mal çekilme olasılığı nedir? 



-----------------------

## Önemli Sürekli Olasılık Dağılımları

### Normal Dağılım

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/nd1.png" style="float: right;" width="300" height="150" title="Normal Dağılım" />

İstatistiksel proses kontrol uygulamalarında kullanılan sayısal hesaplamaların önemli bir bölümü verinin normal dağılıma uyduğu kabulüne göre yapılmaktadır.

Gauss dağılımı olarak da bilinen normal dağılım aşağıdaki temel özelliklere sahiptir.

- Simetriktir, çan eğrisi şeklindedir.
- Veriler ortalama etrafında yoğunlaşmıştır. Eğri altındaki alan tüm olasılıklar toplamına eşit yani 1'dir.
- Dağılımın tek bir zirvesi vardır, ortalama, mod ve medyan değeri aynıdır.

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/normdist.png" style="float: center;" width="700" height="250" title="Normal Dağılım" />

Popülasyon değerlerinin %68.26'sının ortalama artı ve eksi bir standart sapma ($\mu$ ± 1$\sigma$) ile tanımlanan sınırlar arasında kalır, değerlerin %95.46'sı ortalama artı ve eksi iki standart sapma ($\mu$ ± 2$\sigma$) ile tanımlanan sınırlar arasında kalır; ve popülasyon değerlerinin %99.73'ü ortalama artı ve eksi üç standart sapma ($\mu$ ± 3$\sigma$) ile tanımlanan sınırlar dahilindedir. 

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/nd2.png" style="float: center;" width="500" height="350" title="Normal Dağılım" />

Ortalaması ve standart sapması bilinen bir popülasyona ait normal dağılım olasılıklarını hesaplayabilmek için standart normal dağılım tablosu kullanılmaktadır. Standart normal dağılım; Z$\sim$N(0,1) şeklinde ifade edilmektedir. Bir _X_ değişkeni aşağıdaki eşitlik yardımı ile Z standart normal değerine dönüştürülür ve bu sayede standart normal dağılım tablosu kullanılabilir.

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/norm.png" style="float: center;" width="90" height="70" title="Normal Dağılım" />

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/ntable.png" style="float: center;" width="500" height="700" title="Normal Dağılım" />

```{r}
x=seq(0,3.09,by=0.01); head(x)
```

<br>

```{r}
prob=pnorm(x); head(prob)
```
<br>

```{r}
tablo=matrix(prob,ncol=10,byrow=TRUE); tablo
options(digits=4)
```

<br>

```{r}
rownames(tablo)=seq(0,3,b=0.1)
colnames(tablo)=seq(0,0.09,by=0.01)
tablo
```
<br>

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/pnorm.png" style="float: center;" width="700" height="250" title="Normal Dağılım" />

<br>

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/pnormz.png" style="float: center;" width="700" height="220" title="Normal Dağılım" />

<br>

**Örnek:** Bir işletme tarafından üretilen belirli bir mısır gevreğinin geçtiğimiz yıl için ortalama ağırlığı 0.297 kg ve standart sapması 0.024 kg'dır. Normal dağılım varsayımı ile, alt spesifikasyon limiti olan 0.274 kg'dan daha az üretim yapılma olasılığını bulunuz. (Ortalama ve standart sapma geçtiğimiz yıl boyunca yapılan yüksek sayıdaki testten elde ediliği için bu değerler popülasyon değerlerinin tahmini olarak düşünülmelidir.)

* pnorm fonksiyonu varyans değil standart sapma kullanılıyor!

```{r}
# P(X<0.274)
# Z=(0.274-0.297)/0.024=-0.96
# Z_0.96=0.8315     tablo degeri
# P(Z<-0.96)=P(Z>0.96)= 1-0.8315=0.1685
urt<-pnorm(0.274,mean=0.297,sd=0.024, lower.tail = TRUE); urt
```

<br>

**Örnek:** Bir fabrikada üretilen ürünlerin ortalama ağırlıkları 50 kg ve ağırlıkları dağılımının varyansı 49 kg olarak bulunmuştur. Ağırlıkların dağılımı normaldir. Bu ürünlerden 5000 adet alınmıştır. Bu 5000 üründen kaç adetinin

  **a)** 48 ile 51 kg arasında olacağını hesaplayınız.
  
```{r}
# P(48<X<51)= P(X<51)-P(X<48)
a<-pnorm(51,50,7, lower.tail = TRUE)  # varyans 49 kg
b<-pnorm(48,50,7, lower.tail = TRUE)
c<-a-b
```

```{r}
5000*c  # adet
```
<br>  
  
  **b)** 52 kg'den fazla olacağını hesaplayınız.
  
```{r}
# P(X>52)=P(Z>(52-50)/7=0.029)
dgr<-pnorm(52,50,7, lower.tail = FALSE); dgr

5000*dgr    # adet
```
<br>

**Örnek:** Büyük bir firmanın pazarlama elemanlarının aylık satış hasılasına göre dağılımı normal olup ortalaması 200 bin TL ve varyansı da 2500 olarak bilinmektedir. Firma yönetimi çok satış yapan ilk %10'a giren elemanlarına prim verecektir. Prim kazanabilmek için satış hasılası **en az** kaç olmalıdır?

```{r echo=TRUE}
# P(X>x)=0.10
emt=numeric()
for(i in 200:300)
emt[i]=pnorm(i,200,50, lower.tail = FALSE)
emt<-round(emt,3);emt

which(emt==0.10)

```



### Üstel Dağılım

Üstel dağılım adını olasılık yoğunluk fonksiyonundaki üstel fonksiyondan alır. Üstel dağılım belirli bir olayın ortaya çıkmasına kadar geçen süre olarak ortaya tanımlanır. 

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/expo.png" style="float: center;" width="600" height="350" title="Üstel Dağılım" />

<br>

**Örnek:** Bir elektronik hesap makinesi üreticisi ürün garanti süresini bir yıl olarak belirlemiştir. Hesap makinesi bu süre içinde herhangi bir nedenle arızalanırsa, değiştirilir. Arıza zamanı, aşağıdaki olasılık dağılımı ile modellenmiştir:

$f(x)=0.125e^{-0.125x}$,  $x>0$

Hesap makinelerinin yüzde kaçı garanti süresi içinde arızalanır?
  
```{r}
#lambda=0.125
# P(X<1)

pexp(1, rate = 0.125, lower.tail = TRUE)*100
```
<br>


### Gamma Dağılımı



<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/gamma.png" style="float: center;" width="600" height="350" title="Gamma Dağılım" />

Olasılık ve istatistikte çok karşılaşılan dağılımların bazıları (Üstel ve Ki-Kare gibi) Gamma dağılımının özel halidir.

$\Gamma(k+1)=k!$ 

- $X\sim Gamma(r,\lambda)$ olsun, $r=1$ için $X$ rasgele değişkeni üstel dağılıma sahiptir.

- $X\sim Gamma(r,\lambda)$ olsun, $r=p/2$ ve $\lambda=2$ için $X$ rasgele değişkeni serbestlik derecesi $p$ olan ki-kare dağılımına sahiptir.

## Olasılık Grafikleri

Belirli bir olasılık dağılımının, veriler için makul bir model olup olmadığını nasıl anlarız? Olasılık grafikleri, verilerin **öznel** bir görsel incelemesine dayalı olarak örnek verilerin varsayılmış bir dağılıma uygun olup olmadığını belirlemek için kullanılan bir yöntemdir. 

Grafik çizimi için öncelikle veriler küçükten büyüğe doğru sıralanır, ardından sıra numaralarına göre $(j-0.5)/n$ (gözlenen kümülatif sıklık) değeri elde edilir ve gözleme karşılık gelen sıralama değeri $X$ ve $Y$ eksenlerine çizilir.

Varsayılan dağılım verileri yeterince açıklarsa, çizilen noktalar yaklaşık olarak düz bir çizgi boyunca düşecektir; çizilen noktalar düz bir çizgiden önemli ve sistematik olarak saparsa, hipotez edilen model uygun değildir. Genellikle, veri grafiğinin düz bir çizgi olarak olup olmadığının belirlenmesi özneldir.

Bu nedenle goodness-of-fit testlerini kullanmak daha güvenilir ve subjektif sonuçlar elde edilmesini sağlar.

```{r message=FALSE, warning=FALSE,cache=TRUE}
j<-1:10
x<-c(86,87,87.2,87.4,87.8,88.2,88.9,89.6,89.7,90)
y<-100*(j-0.5)/10
x<-sort(x);x
plot_ly(x=x,y=y)
```

[Diğer dağılımlar için detaylı bilgi](https://www.itl.nist.gov/div898/handbook/apr/section2/apr221.htm)

<br>

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/acont.png" style="float: center;" width="400" height="150" title="Contamination" />

<br>

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/others.png" style="float: center;" width="700" height="600" title="Plots" />

## Bazı Faydalı Yaklaşımlar

### Binom - Hipergeometrik

Hipergeometrik dağılım $n\rightarrow\infty$ iken Binom dağılımına yaklaşır. Bazen sonlu elemanlı bir kitleden iadesiz çekiliş yapılmak istenebilir. Bir deneyin sadece iki sonucu varsa (sarı ve lacivert topların bulunduğu bir kavanozdan aynı anda ya da iadesiz çekiliş yapılması), çekilen örnek sayısı  sabit ve denemeler bağımlı (deneylerde birinin sonucu diğerini etkiliyorsa) ise böyle durumlarda Hipergeometrik dağılım kullanılır.  


### Binom - Poisson

$X\sim Binom(n,p)$ ve $Y\sim Poisson(\mu)$ olmak üzere, $n$ yeterince büyük olduğu durumda binom dağılımına poisson dağılımı olarak yaklaşılabilir.

Yaklaşım büyük $n$ değeri ve küçük $p$ değeri için uygundur (genellikle p <0.1). $n$'nin değeri ne kadar büyük ve $p$'nin değeri ne kadar küçükse, yaklaşım o kadar iyi çalışmaktadır.

Binom dağılımı ile Poisson dağılımı arasında bir benzerlik kurulabilir. Örneğin, belirli bir saat dilimi içinde bir mağazaya giren müşterilerin sayısı Poisson rasgele değişkenidir. Oysa, mağazaya giren (maksimum müşteri sayısı sabit) her müşteriyi başarı olarak değerlendirirsek, mağazaya giren müşterilerin sayısı Binom dağılımına sahip olur. 

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/binpois.png" style="float: center;" width="700" height="350" title="Poisson-Binom Dağılım" />

Yukarıda, değişik $\mu$ değerleri için $Y\sim Poisson(\mu)$ ve $X\sim Binom(n,p)$ olmak üzere, $p=\mu/n$ alınarak $P(X=1)$ ve $P(Y=1)$ olasılıkları hesaplanarak (değerler dördüncü basamaktan sonra yuvarlatılmıştır) tablo halinde verilmiştir. Tablodaki değerlerden de görüldüğü gibi, $n$ değeri büyüdükçe, $P(X=1)$ Binom olasılıkları $P(Y=1)$ olasılıklarına yaklaşmaktadır.


### Normal - Binom

$p$ çok küçük değilse ve $n$ de büyükse binom dağılımdan yararlanarak olasılıkları hesaplamak güçleşir. $n\rightarrow \infty$ iken binom olasılıkları normal dağılıma yaklaştırılabilir. Bu dağılımın ortalaması ve varyansı, binom dağılımından

$\mu=E(X)=np$

$\sigma^{2}=Var(X)=npq$

olarak hesaplanır. Bu durumda $X\sim N(np,npq)$ olur. Bu nedenle $p$ çok küçük değilse ve $n$ de büyükse binom dağılımına sahip $X$ değişkeninin belli bir değerden küçük ya da büyük olması veya herhangi iki değer arasında yer alma  olasılıkları standart normal dağılım tablosu kullanılarak hesaplanabilir. Fakat Binom dağılımı kesikli ve normal dağılım sürekli olduğundan standart normale dönüştürme yapılırken düzeltme işlemi yapılması gerekir. Bu düzeltme işlemi $\pm0.5$ değeri kullanılarak yapılır.   


<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/pm.png" style="float: center;" width="420" height="230" title="Süreklilik Düzeltmesi" />

<br>

**Örnek:** Bir firmanın ürünleri için yapılan müşteri memnuniyeti araştırması sonuçlarına göre müşterilerin 0.60'ı memnun olduklarını beyan etmişlerdir. Bu firmanın müşterilerinden rasgele 100 müşteri seçildiğinde en az 50 sinin memnuniyet beyan etme olasılıkları kaçtır?


```{r}
p=0.60 
q=1-p
n=100

mu=n*p
var=n*p*q
mu; var
```
<br>
 
```{r}
# P(X>=50)
pnorm(50-0.5,mu,sqrt(var), lower.tail = FALSE)   #-0.5 süreklilik düzeltmesi
```

## Pareto Analizi 

Pareto analizi, kalite iyileştirme çalışmalarında en çok kullanılan tekniklerden biri olup, verileri önem veya öncelik sırasına göre düzenlemeye dayanan bir tekniktir. 

Vilfredo Pareto tarafından ortaya koyulan yöntem, 80/20 kuralı olarak da bilinmektedir. Prensip bulunduğunda, İtalya'daki toprağın %80'ine popülasyonun %20'si sahiptir. Daha sonra, pareto prensibinin hayatın diğer alanlarında da geçerli olduğu keşfedilmiştir. Bu bakımdan pareto analizi için aşağıdaki örnekler verilebilir.

- Proses hatalarının %80'i, proses problemlerinin %20'sinden dolayı oluşur. 
- Şirket gelirinin %80'i, satış elemanlarının %20'si tarafından üretilir.
- Çizelgelemedeki gecikmelerin %80'i, gecikme nedenlerinin %20'sinden kaynaklanır.
- Müşteri şikayetlerinin %80'i, ürün ya da servislerin %20'sinden dolayı oluşur.

Bu örneklerde yer alan tahminler, kaba tahminlerdir. Pareto diyagramları, kalite yönetimi ile ilgili çalışmalarda, en önemli problemleri belirlemede kullanılmaktadır. Bu diyagramlar; en büyük etkiye sahip nedenler üzerine takımın odaklanmasına yardım etmekte ve basit bir görsel formatta problemlerin bağıl önemini göstermektedir. 

Pareto analizine ait aşamalar aşağıdaki gibidir;

- Tüm hata unsurlarının listelenmesi
- Hata unsurlarının miktarlarının (sıklık ve/veya maliyet) belirlenmesi
- Hata unsurlarının **çoktan aza** doğru sıralanması ve verinin özetlenmesi
- Kümülatif dağılımların hesaplanması
- Pareto grafiğinin çizimi
- Pareto eğrisinin çizimi
- Pareto eğrisinin yorumu

Pareto analizinde, verilerin hem **en sık rastlanan** hatalara göre , hem de **en fazla maliyet getiren** hatalara göre yapılması gereklidir. Çok sık rastlanan bir hatanın bize getireceği maddi yük (maliyet) düşük olabileceği gibi, az rastlanan bir hatanın oluşturacağı maliyet yüksek olabilir.

<br>

**Örnek1**
```{r message=FALSE, warning=FALSE}

#install.packages("qcc")

library(qcc)
kusur <- c(27, 789, 9, 65, 12, 109, 30, 15, 45, 621)

names(kusur) <- c("Gürültülü", "Pahalı", "Taze değil",  
                   "Lezzetsiz", "Pers. yetersiz", 
                   "Uzun bekleme", "Temiz değil", "Tuzlu",  
                   "Sunum kötü", "Porsiyon küçük" )

pareto.chart(kusur, ylab="Sıklık",  # y-eksen ismi
             
# grafik rengi              
col=heat.colors(length(kusur)),  
  
# yüzde aralıkları
cumperc = seq(0, 100, by = 20),   
  
# label y right 
ylab2 = "Kümülatif Yüzde",  
  
# grafik ismi 
main = "Farklı Müşteri Şikayetleri" 

)

```

<br>

**Örnek2**
```{r}
defect <- c(80, 27, 66, 94, 33)
names(defect) <- c("price code", "schedule date", "supplier code", "contact num.", "part num.")
pareto.chart(defect, ylab = "Error frequency")
```

**Pareto Öncelik İndeksi (Pareto Priority Index):** Hangi hatanın düzeltilmesine öncelik verilmesi gerektiğini öngörmemizi sağlayan indekstir.

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/ppi.png" style="float: center;" width="300" height="60" title="PPI" />

Her bir hata düzeltme faaliyetini bir proje olarak planlamak gerekmektedir. Denklemdeki savings (tasarruf), bu hatayı ortadan kaldırdığımızda elde edilecek parasal tutarı, probability of success (başarı olasılığı), bu projenin başarılı olabilme şansını (0-1 aralığında), cost (proje maliyeti), bu projenin bize getireceği toplam maliyeti ve time of completion (projenin tamamlanma süresi), ay veya yıl olarak projenin ne kadar süre ile planlandığını ifade etmektedir. PPI'da en yüksek değerde olan hata unsurunun düzeltilmesi için bir çalışma başlatılması gerekmektedir.

## Sebep-Sonuç (Cause and Effect) Analizi 

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/fishbone.png" style="float: right;" width="320" height="100" title="Check Sheet" />

Sebep-sonuç diyagramları Kaoru İshikawa tarafından 1943'te geliştirilmiştir. Belirli bir sorunun temel nedenini bulmak için olası nedenleri görselleştirmeye yardımcı olur. Kalite sorunlarını belirlemek, analiz etmek ve iyileştirmek amacıyla kullanılır.  

Balık kılçığı (fishbone) diyagramı olarak da adlandırılan sebep-sonuç diyagramının oluşturulma adımları aşağıdaki gibi özetlenebilir;

- Kalite problemini belirle
- Önemli nedenleri belirle
- Tüm minör nedenleri belirle (beyin fırtınası)
- Diyagram tamamlandığında en olası nedenleri belirlemek için diyagramı değerlendir.
- Çözümler geliştir.

Sebep-sonuç analizinin yararları şunlardır;

- Yöntem, sorunların üzerine giden aktif bir yönetimi geliştirir.
- Diyagramın  hazırlanması iletişimi güçlendirir ve herkesin dikkatinin bir noktaya toplanmasını sağlar. 
- Eğitici bir çalışmadır, herkesin bilgisini geliştirir.
- Verilerin toplanmasını ve probleme bilimsel biçimde yaklaşmayı sağlar.
- Tüm sorunlara uygulanabilir.

İskeletin "başı" genellikle sağda gösterilen problemi veya etkiyi tasvir eder. Farklı nedenleri göstermek için solda "kemikler" uzanır. Kaburgalar, nedenlere ve alt nedenlere ayrılan analiz için nedenlerin kategorilerini veya sınıflandırmasını belirtir. Dallanma, her sınıflandırma altında gerekli olan seviyelere bağlıdır.

<br>

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/Fish1.png" style="float: center;" width="600" height="300" title="Fishbone" />

<br>

Fishbone diyagramı DMAIC sürecinin analiz aşamasında da kullanılmaktadır.

<br>

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/Fish2.png" style="float: center;" width="600" height="300" title="Fishbone" />

<br>

Fishbone diyagramının kullanımı ile;

- Yeni ürün dizaynında ortaya çıkabilecek problemlerin potansiyel nedenleri
- Kalite kusurlarından kaçınma yolları
- Kusura neden olabilecek potansiyel faktörler

tanımlanabilmektedir.

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/Fish3.png" style="float: center;" width="600" height="300" title="Fishbone" />

**Örnek1:**
```{r}
library(SixSigma)
effect <- "Flight Time"
causes.gr <- c("Operator", "Environment", "Tools", "Design", 
  "Raw.Material", "Measure.Tool")
causes <- vector(mode = "list", length = length(causes.gr))
causes[1] <- list(c("operator #1", "operator #2", "operator #3"))
causes[2] <- list(c("height", "cleaning"))
causes[3] <- list(c("scissors", "tape"))
causes[4] <- list(c("rotor.length", "rotor.width2", "paperclip"))
causes[5] <- list(c("thickness", "marks"))
causes[6] <- list(c("calibrate", "model"))
ss.ceDiag(effect, causes.gr, causes, sub = "Paper Helicopter Project")
```
<br>

**Örnek2:**
```{r}
b.effect <- "Delay"
b.groups <- c("Personnel", "Weather", "Suppliers", "Planning")
b.causes <- vector(mode = "list", length = length(b.groups))
b.causes[1] <- list(c("Training", "Inadequate"))
b.causes[2] <- list(c("Rain", "Temperature", "Wind")) 
b.causes[3] <- list(c("Materials", "Delays", "Rework"))
b.causes[4] <- list(c("Customer", "Permissions", "Errors"))
ss.ceDiag(b.effect, b.groups, b.causes, sub = "Construction Example")
```


## Kontrol Listeleri

Kontrol listelerinin oluşturulmasının ana amacı; proses kontrolü ve problem çözümü için işletme personeli tarafından dikkatli şekilde ve doğru olarak veri toplanmasının sağlanmasıdır. Kontrol listelerinin yapısı, her bir durum için özelleştirilir ve proje takımı tarafından tasarlanır. Yaratıcılık, bir kontrol listesinin tasarlanmasında büyük rol oynamaktadır.

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/check.png" style="float: center;" width="420" height="300" title="Check Sheet" />

Bu kontrol listesi örneğinde, her bir kalite kusuru nedeni ve bu nedenlerin gözlenme sayıları yer almaktadır. Operatör, her üründe gözlemlediği kalite kusurunu, bu listede işaretler ve muayene işlemi tamamlandığında her bir kusur tipi için toplam sayı belirlenir. Kontrol listesinin üst kısmında ise veri toplanan ürüne ve sürece ait bilgiler ile muayeneyi gerçekleştiren operatöre ait bilgiler yer almaktadır. 

Kontrol listeleri, istatistiksel kalite kontrol çalışmaları için temel veriyi sağlamaktadır. Kontrol listelerinin faydaları aşağıdaki şekilde özetlenebilir;

- Veriyi anlamada kolaylık sağlar.
- Gözlem ile oluşturulur, gerçeklerin daha net bir resmini sunmaktadır.
- Verideki desenler hızlı ve net bir şekilde gözlenebilir.

## Serpilme (Scatter) Diyagramı

Serpilme diyagramı, iki değişken arasındaki ilişkinin incelenmesi için kullanılan bir grafik türüdür.

Serpilme diyagramları;

- İki değişkenin ilişkili olduğunu belirten bir hipotezi doğrulamak
- İlişkinin gücünü test etmek için görsel ve istatistiksel bilgi sağlamak

amacıyla kullanılabilir. Serpilme diyagramında iki değişken ilişkili gözlenebilir ancak bu durum değişkenlerin arasında nedensellik olduğu anlamına gelmemektedir.

```{r message=FALSE, warning=FALSE}
library(MSQC)
library(plotly)
data("mech1")
mech1<-as.data.frame(mech1)
head(mech1)
attach(mech1)
s1<-plot_ly(data = mech1, x = ~var1, y = ~var2);s1
```

```{r message=FALSE, warning=FALSE}
s2<-plot_ly(data = mech1, x = ~var1, y = ~var1);s2
```


## Kusur Konsantrasyon Diyagramı

Kusur verileri, yeterli sayıda birim üzerinde bir kusur konsantrasyon diyagramında gösterildiğinde, modeller ortaya çıkar ve bu modellerin konumu genellikle kusurların nedenleri hakkında çok fazla bilgi içerir. Kusur konsantrasyon diyagramı DMAIC sürecinin analiz kısmında oldukça kullanışlıdır. 

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/dcd.png" style="float: center;" width="800" height="400" title="Defect Conc. Diag." />

Bir buzdolabı üretim sürecinin son montaj aşaması için bir kusur konsantrasyon diyagramı görselde yer almaktadır. Yüzey bitirme kusurları, buzdolabındaki koyu gölgeli alanlarla belirlenmiştir. Diyagram incelendiğinde, bu kusurların çoğundan malzeme işlemenin sorumlu olduğu açıkça görülmektedir. Ünite, ortasına bir kayış sabitlenerek hareket ediyor ve bu kayış ya çok gevşek ya da sıkı, yıpranmış, aşındırıcı malzemeden yapılmış ya da çok dar olabilir. Ayrıca ünite hareket ettirildiğinde köşeler zarar görür. İşçi yorgunluğunun olası bir faktör olarak değerlendirilebilir. Her halükarda, uygun çalışma yöntemleri ve iyileştirilmiş malzeme kullanımı bu süreci büyük ölçüde iyileştirecektir.

Benzer şekilde tank problemi için kusur konsantrasyon diyagramı görülmektedir. Hata kategorilerinin farklı harflerle temsil edildiği açıktır.

Kaplama, boyama ve kaplama, döküm ve dökümhane işlemleri, işleme ve elektronik montaj dahil olmak üzere birçok sektörde kusur konsantrasyon diyagramlarının önemli problem çözme araçları olduğu bilinmektedir.

<!--chapter:end:05-İstatistiksel-Kavramlar.Rmd-->


# Değişkenlik ve Kontrol Diyagramlarına Giriş

Placeholder


## Değişkenlik Kavramı ve Kaynakları
### Doğruluk ve Hassasiyet
## Kontrol Diyagramlarına Giriş
### Kontrol Limitlerinin Seçimi

<!--chapter:end:06-Değişkenlik-ve-Kontrol-Diyagramlarına-Giriş.Rmd-->


# Ölçülebilir Değişkenler için Kontrol Diyagramları

Placeholder


## Tekil Ölçümler için I ve MR (Individual-Moving Range) Kontrol Diyagramları
## X-R Kontrol Diyagramları
## Alt Grup Kavramı ve Örneklem Büyüklüğünün Belirlenmesi
## Kontrol Dışı Olma Durumu
## X-S Kontrol Diyagramları

<!--chapter:end:07-Ölçülebilir-Değişkenler-için-Kontrol-Diyagramları.Rmd-->


# Ölçülemeyen Özellikler için Kontrol Diyagramları

Placeholder


## p kontrol diyagramı
## np kontrol diyagramı
## c kontrol diyagramı
## u kontrol diyagramı

<!--chapter:end:08-Ölçülemeyen-Özellikler-için-Kontrol-Diyagramları.Rmd-->


# Proses Yeterlilik Analizi 

Placeholder


## Neden PCA
## Histogramlar veya olasılık grafikleri
## Proses Yeterliliği ve Sigma Kalite Seviyesi
## $C_{p}$, $C_{pk}$ ve $C_{pm}$ Proses Yeterlilik İndeksleri
### $C_{p}$ Proses Yeterlilik Indeksi
### $C_{pk}$ Proses Yeterlilik Indeksi
### $C_{pm}$ Proses Yeterlilik Indeksi

<!--chapter:end:09-Proses-Yeterlilik-Analizi.Rmd-->


# Diğer Kontrol Diyagramları

Placeholder


## CUSUM (Cumulative Sum) Kontrol Diyagramı
### Çizelge (Tabular) Yöntemi
### V Maskesi Yöntemi
## EWMA (Exponentially Weighted Moving Average) Kontrol Diyagramı

<!--chapter:end:10-Diğer-Kontrol-Diyagramları.Rmd-->


# Kabul Örneklemesi

Placeholder


## Örnekleme Planı Tipleri
## Parti Oluşturma
## Rasgele Örnek Alma
## Niteliksel Özellikler için Basit Örnekleme Planları
## Çalışma Karakteristiği Eğrisi (OC-Operating Characteristic Curve)
## OC Eğrisi Üzerindeki Önemli Noktalar

<!--chapter:end:11-Kabul-Örneklemesi.Rmd-->

# Ekler

**Relative range:** $W=\frac{R}{\sigma}$,    $E(W)=d_{2}$



**Unbiased estimator of $\sigma$ of a normal dist.:** 

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/shat.png" style="float:center;" width=900" height="100" title="" />

- $n\geq10$, the range loss efficiency rapidly

- $n\leq6$\ works very well



## Ölçülebilir Değişkenler için Kontrol Grafiği Faktör Tablosu

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/Ek1.png" style="float:center;" width=900" height="600" title="" /> 


## Standart Normal Dağılım Tablosu

<img src="/Users/DENIZ/OneDrive/Belgeler/GitHub/quality-control/images/ztable.png" style="float:center;" width=800" height="1000" title="Z Tablosu" /> 


<!--chapter:end:12-Ekler.Rmd-->

# Kısaltmalar

```{r , echo=FALSE, results='asis'}
  cat('

  | Kısaltma    | İngilizce  | Türkçe      |
  |:------------|:-----------|:------------|
  | ASQ| American Society for Quality | Amerikan Kalite Derneği |
  | CUSUM| Cumulative Sum | Kümülatif Toplam |
  | EFQM| European Foundation for Quality Management | Avrupa Kalite Yönetimi Vakfı |
  | EWMA| Exponentially Weighted Moving Average | Üstel Ağırlıklı Hareketli Ortalama |
  | ISO| International Organization for Standardization | Uluslararası Standartlar Teşkilatı |
  | MBNQA| Malcolm Baldrige National Quality Award | Malcolm Baldrige Ulusal Kalite Ödülü |
  | PPI| Pareto Priority Index | Pareto Öncelik İndeksi|
  | SPC| Statistical Process Control| İstatistiksel Proses Kontrol|
  | SQC| Statistical Quality Control | İstatistiksel Kalite Kontrol|
  | TQM| Total Quality Management | Toplam Kalite Yönetimi|
')

```



<!--chapter:end:13-Kısaltmalar.Rmd-->

